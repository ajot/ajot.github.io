<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">
    <link rel="canonical" href="https://ajot.me">

    <title>Creating a scaffold for new Alexa skill using the Alexa CLI - Amit Jotwani</title>

    <!-- Bootstrap -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="https://getbootstrap.com/docs/3.3/examples/blog/blog.css"> -->
    <link rel= "stylesheet" type= "text/css" href= "/static/styles/blog.css">
    <!-- Custom styles for this template -->
    <link rel= "stylesheet" type= "text/css" href= "/static/styles/style.css">

  </head>

  <body>
    <div class="blog-masthead">
      <div class="container">
        <nav class="col-sm-offset-1 col-sm-10 blog-nav">
          <a class="site-nav-logo" href="/">AMIT JOTWANI</a>
          
            <!-- <p>Path = 2019-11-06-creating-a-scaffold-for-new-alexa-skill-using-the-alexa-cli</p>
            <p>Item = essays</p> -->

             
               <a class="blog-nav-item" href="/essays">Essays</a>
            
           
            <!-- <p>Path = 2019-11-06-creating-a-scaffold-for-new-alexa-skill-using-the-alexa-cli</p>
            <p>Item = alexa</p> -->

             
               <a class="blog-nav-item" href="/alexa">Alexa</a>
            
            
          
          
        </nav>
      </div>
    </div>

    <div id ="main" class="container">

      <div class="row">

        <div class="col-sm-offset-1 col-sm-10 blog-main">
            
<div class="blog-post">
    <h1 class="blog-post-title center">Creating a scaffold for new Alexa skill using the Alexa CLI</h1>

    
  <img src = https://m.media-amazon.com/images/G/01/DeveloperBlogs/AlexaBlogs/default/AHS(2).png />
    <p><p>If you’re into building skills, you’re probably familiar with Alexa Skills Kit’s Command Line Interface, which lets you create and manage your skill using the CLI, like updating the interaction model, and the backend code. You can of course manage these directly through the Alexa Developer Console, and AWS respectively, but CLI is a much faster workflow.</p>
<p>There are two ways to create a new Alexa skill using the <a href="https://developer.amazon.com/docs/smapi/quick-start-alexa-skills-kit-command-line-interface.html">ASK-CLI</a>. You can use AWS Lambda as your backend, or if you are new and would like to keep things simple initially, you can use Alexa Hosted.</p>
<p>With an Alexa-hosted skill, your code is available inside a code editor in the Alexa developer console itself, so you can edit and deploy changes to your code quickly, without needing to set up an AWS account. </p>
<p>Let’s look at how you can use the ASK-CLI to create a new skill using each of these two backend options. </p>
<h2>Option 1: Using AWS Lambda as the backend</h2>
<h3>Prerequisites</h3>
<ol>
<li><a href="http://developer.amazon.com/">An Amazon developer account</a>. Sign up is free.</li>
<li><a href="https://developer.amazon.com/docs/smapi/quick-start-alexa-skills-kit-command-line-interface.html#set-up-iam-user">Set up an AWS IAM user</a></li>
<li><a href="https://developer.amazon.com/docs/smapi/quick-start-alexa-skills-kit-command-line-interface.html#install-initialize">Install and initialize ASK CLI</a>  </li>
</ol>
<p>You can find more information about the prerequisites on the Amazon Developer Documentation <a href="https://developer.amazon.com/docs/smapi/quick-start-alexa-skills-kit-command-line-interface.html">here</a>.</p>
<h3>Step 1: Create a new skill using the ASK-CLI with AWS Lambda as backend</h3>
<ol>
<li>Assuming you already have the ask-cli setup (see prerequisites) , open up the terminal, and type the following -  </li>
</ol>
<pre class="wp-block-code"><code>$ ask new 
</code></pre>

<p>This will provide the following prompts - </p>
<ol start="2">
  <li>
    Select the runtime - <code>Node.js V8</code> or <code>Python3</code>
  </li>
  <li>
    Choose <code>hello world</code> as the template to get started with
  </li>
  <li>
    Type in your skill name - <code>ice-cream-soda</code> (or a name you prefer)<br />
  </li>
</ol>

<p>This will create the skill locally on your machine. </p>
<h3>Step 2: Deploying the skill (Interaction Model and AWS Lambda)</h3>
<p>Type the following into the command line - </p>
<pre class="wp-block-code"><code>$ cd ice-cream-soda
$ ask deploy
</code></pre>

<p>This may take a few minutes, and if everything goes well, you will get a confirmation that <code>Your skill is now deployed and enabled in the development stage. Try simulate your Alexa skill skill using "ask dialog" command.</code> You can verify by logging into the Alexa developer console at <a href="https://developer.amazon.com/alexa/console/ask">developer.amazon.com/alexa/console/ask</a>. Your backend code has been deployed as an AWS Lambda function using the AWS IAM user you set up in #2 of the prerequisites, which you can verify by logging into your AWS Console at <a href="https://console.aws.amazon.com/lambda/">console.aws.amazon.com/lambda</a>.</p>
<h3>Step 3: Pushing the skill code to GitHub for collaboration</h3>
<ol>
<li>Create a new repo on GitHub.com, say <code>ice-cream-soda</code>. If curl is your thing, you can also type this on the command line -  </li>
</ol>
<pre class="wp-block-code"><code>$ curl -u 'YOUR_GITHUB_USER_NAME' https://api.github.com/user/repos -d '{"name":"YOUR_NEW_REPO_NAME"}'
</code></pre>

<p>When you use <code>ask new</code> to create a new skill using one of the templates (say hello world), the git remote for the skill directory that's created for you points to <code>https://github.com/alexa/skill-sample-nodejs-hello-world.git</code>. If you’d like to push your skill code on GitHub, you need to remove the <code>.git</code> directory, which removes the remote. Let’s do that now. </p>
<ol start="2">
  <li>
    Remove the <code>.git</code> directory (hidden by default) to reset the remote origin, which is by default set to <a href="#">https://github.com/alexa/skill-sample-nodejs-hello-world.git</a>(https://github.com/alexa/skill-sample-nodejs-hello-world.git). <br />
  </li>
</ol>

<pre class="wp-block-code"><code>$ rm -r .git
</code></pre>

<p>You may get a warning asking if you’d like to override removal of <code>.pack</code> and <code>.idx</code> files. Type<code>yes</code> to confirm.</p>
<p>You can now deploy your skill code to a GitHub repo with no problems, without breaking the <code>ask deploy</code> process to deploy the skill to AWS Lambda/Developer Console. </p>
<ol start="3">
  <li>
    Initialize Git
  </li>
</ol>

<pre class="wp-block-code"><code>$ git init
</code></pre>

<ol start="4">
  <li>
    <a href="https://help.github.com/en/github/using-git/adding-a-remote">Add a remote</a>to point to the new GitHub repo<br />
  </li>
</ol>

<pre class="wp-block-code"><code>$ git remote add origin git@github.com:YOUR_GITHUB_USERNAME/YOUR_GITHUB_REPO_NAME.git

// example: 
// git remote add origin git@github.com:ajot/ice-cream-soda.git
</code></pre>

<ol start="5">
  <li>
    Push to GitHub<br />
  </li>
</ol>

<pre class="wp-block-code"><code>$ git add . 
$ git commit -m "first commit"
$ git push -u origin master
</code></pre>

<h2>Option 2: Using Alexa Hosted as the backend</h2>
<p>You can also use the Alexa Skills Kit CLI to create a skill using Alexa Hosted as the backend, instead of AWS Lambda using the <a href="#">create-hosted-skill</a>(https://developer.amazon.com/docs/smapi/ask-cli-command-reference.html#create-hosted-skill-command) command. Support is available for Node.js only for Alexa Hosted through the CLI. </p>
<h3>Step 1: Create a new skill using the ASK-CLI with AWS Lambda as backend</h3>
<ol>
<li>Open up the terminal, and type the following -  </li>
</ol>
<pre class="wp-block-code"><code>$ ask create-hosted-skill
</code></pre>

<ol start="2">
  <li>
    Type in your skill name: <code>kiwi-cream-soda</code>
  </li>
  <li>
    Select the runtime - <code>Node.js V8</code> or <code>Python3</code>
  </li>
  <li>
    Alexa hosted skill is created. Do you want to clone the skill project to current working directory? (Y/n)
  </li>
  <li>
    Type <code>yes</code><br />
  </li>
</ol>

<p>Your skill has now been automatically <strong>deployed</strong> on the Alexa Developer Console using Alexa Hosted. For future deployments, just use <code>ask deploy</code> from within the skill directory. </p>
<h3>Step 2: Pushing the repo to GitHub</h3>
<p>When you use <code>ask create-hosted-skill</code> to create a new skill, the git remote is set to an AWS Code Commit service <code>https://git-codecommit.us-east-1.amazonaws.com</code>. We need to add another remote, so we can push to both GitHub without breaking the AWS Code Commit service. We will do this in step by adding a new remote (Step 2 below), and then updating the Push URLs for the remotes (Step 3 below)</p>
<ol>
<li>Create a new repo on GitHub.com, say <code>kiwi-cream-soda</code>. If curl is your thing, you can also type on the command line -  </li>
</ol>
<pre class="wp-block-code"><code>$ curl -u 'YOUR_GITHUB_USER_NAME' https://api.github.com/user/repos -d '{"name":"YOUR_NEW_REPO_NAME"}'
</code></pre>

<ol start="2">
  <li>
    Type the following into the terminal - <br />
  </li>
</ol>

<pre class="wp-block-code"><code>$ cd kiwi-cream-soda
$ nano .git/config
</code></pre>

<p>Make a note of the Push URL. We will need this in the next step. This will be something like -<code>https://git-codecommit.us-east-1.amazonaws.com/.....</code></p>
<p>CTRL + X to exit the nano editor.</p>
<ol start="3">
  <li>
    <a href="https://help.github.com/en/github/using-git/adding-a-remote">Add a new remote</a> <br />
  </li>
</ol>

<pre class="wp-block-code"><code>$ git remote add github git@github.com:YOUR_GITHUB_USERNAME/YOUR_GITHUB_REPO_NAME.git

// example:
// git remote add github git@github.com:ajot/kiwi-cream-soda.git
</code></pre>

<ol start="3">
  <li>
    Configure the Push URLs - for GitHub, and the original push URL for deploying the skill code to Alexa Hosted. <br />
  </li>
</ol>

<p>Set remote URL for GitHub</p>
<pre class="wp-block-code"><code>$ git remote set-url --add --push origin git@github.com:YOUR_GITHUB_USERNAME/YOUR_GITHUB_REPO_NAME

//example: 
// git remote set-url --add --push origin git@github.com:ajot/kiwi-cream-soda.git
</code></pre>

<p>Set remote URL for AWS Commit Service to enable the <code>ask deploy</code> workflow.</p>
<pre class="wp-block-code"><code>$ git remote set-url --add --push origin YOUR_PUSH_URL_FROM_GIT_CONFIG_FILE_FROM_STEP_2

//example:
// git remote set-url --add --push origin https://git-codecommit.us-east-1.amazonaws.com/v1/repos/xxxxx-xxxxx-xxxxx

</code></pre>

<ol start="4">
  <li>
    Verify the Push URL’s have been updated for the remote origin
  </li>
</ol>

<pre class="wp-block-code"><code>[remote "origin"]
        url = https://git-codecommit.us-east-1.amazonaws.com/v1/repos/xxxxx-xxxxx-xxxxx
        fetch = +refs/heads/*:refs/remotes/origin/*
        pushurl = git@github.com:&lt;YOUR_USER_NAME>/kiwi-cream-soda.git
        pushurl = https://git-codecommit.us-east-1.amazonaws.com/v1/repos/xxxxx-xxxxx-xxxxx

</code></pre>

<p>CTRL + X to exit the nano editor.</p>
<ol start="6">
  <li>
    Deploy to Alexa Hosted, and push to GitHub<br />
  </li>
</ol>

<pre class="wp-block-code"><code>$ git add .
$ git commit -m "first commit"
$ ask deploy

</code></pre>

<p>This will deploy the skill to Alexa Hosted, and also push to GitHub. </p>
<h2>Updating the ASK-CLI</h2>
<pre class="wp-block-code"><code>$ npm install -g ask-cli
$ ask -v 
</code></pre><p>
  </div><!-- /.blog-post -->

        </div><!-- /.blog-main -->
      </div><!-- /.row -->

    </div><!-- /.container -->

    <footer class="footer blog-footer">
      <p><a href="https://ajot.me">ajot.me</a> is 100% fresh HTML. Brewed with <a href="https://flask.palletsprojects.com/">Flask</a>. Served with <a href="https://pythonhosted.org/Frozen-Flask/">Frozen-Flask</a>. Hosted on <a href="https://pages.github.com">GitHub</a>.</a>  | <a href="https://github.com/ajot/ajot.github.io/commits/main">Change log</a></p>
    </footer>
    
  </body>
</html>